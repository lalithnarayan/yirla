import{Q as N,$ as n,T as S,U as v,V as C,f as g,j as e,r as w,G as y,X as R}from"./index-sFzf4xgK.js";import{c as T}from"./SalesService-Q3Tn9uFR.js";import{D as M}from"./index-svCEv1cS.js";import{B as m}from"./Button-7VCVZJfX.js";import{J as k}from"./index.esm-a15joBQq.js";import{C as p}from"./Card-0NcWSoxi.js";import{N as A}from"./react-number-format.es-2TFZlsyx.js";import{G as E}from"./GrowShrinkTag-1PBQ2zAj.js";import{C as F}from"./Chart-tjp24t0T.js";import{T as f}from"./index-U7R5GIaq.js";import{A as x}from"./index-l28G_51M.js";import{c as Y,u as P,g as H,f as h}from"./index-7lD32DxE.js";import{a as B}from"./index.esm-jZSZvgvt.js";import"./useControllableState-vYcyW9Gn.js";import"./useMergeRef-Rt_Crb27.js";import"./RangeCalendar-VdZRgz_Z.js";import"./Input-54qFW4_N.js";import"./context-_X_Ia2Rl.js";import"./isNil-jxFxtNPR.js";import"./CloseButton-Lwp70ThL.js";import"./floating-ui.react-xe1dPT16.js";import"./floating-ui.dom-KU0eYpRY.js";import"./TimeInput-CVdDVJm6.js";import"./useUniqueId-PxbSI7-8.js";import"./useDidUpdate-a_uQBhDP.js";import"./Tag-lEthrBg-.js";import"./chart.constant-jM3De4-L.js";import"./index-mu0NPuvO.js";import"./chart.config-na3HyKAJ.js";import"./index.esm-iiyI-toU.js";import"./Tooltip-2HBl8IKw.js";import"./index.esm-PEPNg8t8.js";import"./index-F1ElV9AB.js";import"./motion-JMywUYCu.js";const D="salesDashboard",c=N(D+"/getSalesDashboardData",async()=>(await T()).data),G={startDate:n(n().subtract(3,"month").format("DD-MMM-YYYY, hh:mm A")).unix(),endDate:n(new Date).unix(),loading:!0,dashboardData:{}},b=S({name:`${D}/state`,initialState:G,reducers:{setStartDate:(a,s)=>{a.startDate=s.payload},setEndDate:(a,s)=>{a.endDate=s.payload}},extraReducers:a=>{a.addCase(c.fulfilled,(s,t)=>{s.dashboardData=t.payload,s.loading=!1}).addCase(c.pending,s=>{s.loading=!0})}}),{setStartDate:z,setEndDate:V}=b.actions,$=b.reducer,L=v({data:$}),l=C,O="MMM DD, YYYY",{DatePickerRange:I}=M,J=()=>{const a=g(),s=l(i=>i.salesDashboard.data.startDate),t=l(i=>i.salesDashboard.data.endDate),o=i=>{a(z(n(i[0]).unix())),a(V(n(i[1]).unix()))},r=()=>{a(c())};return e.jsxs("div",{className:"lg:flex items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h3",{children:"Dashboard"}),e.jsx("p",{children:"View your current sales & summary"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:[e.jsx(I,{value:[n.unix(s).toDate(),n.unix(t).toDate()],inputFormat:O,size:"sm",onChange:o}),e.jsx(m,{size:"sm",icon:e.jsx(k,{}),onClick:r,children:"Filter"})]})]})},Q=({data:a={value:0,growShrink:0},label:s,valuePrefix:t,date:o})=>e.jsxs(p,{children:[e.jsx("h6",{className:"font-semibold mb-4 text-sm",children:s}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:e.jsx(A,{thousandSeparator:!0,displayType:"text",value:a.value,prefix:t})}),e.jsxs("p",{children:["vs. 3 months prior to"," ",e.jsx("span",{className:"font-semibold",children:n(o).format("DD MMM")})]})]}),e.jsx(E,{value:a.growShrink,suffix:"%"})]})]}),U=({data:a={}})=>{const s=l(t=>t.salesDashboard.data.startDate);return e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:e.jsx(Q,{data:a.revenue,valuePrefix:"$",label:"Revenue",date:s})})},d=({className:a,data:s={},reportName:t})=>e.jsxs(p,{className:a,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{children:t}),e.jsx(m,{size:"sm",children:"Export Report"})]}),e.jsx(F,{series:s.series,xAxis:s.categories,height:"380px",customOptions:{legend:{show:!1}}})]}),{Tr:u,Td:X,TBody:_,THead:q,Th:K}=f,W=({row:a})=>{const s=a.img?e.jsx(x,{src:a.img}):e.jsx(x,{icon:e.jsx(B,{})});return e.jsxs("div",{className:"flex items-center gap-2",children:[s,e.jsx("span",{className:"font-semibold",children:a.name})]})},j=Y(),Z=[j.accessor("name",{header:"name",cell:a=>{const s=a.row.original;return e.jsx(W,{row:s})}}),j.accessor("followers",{header:"Followers"})],ee=({data:a=[],className:s})=>{const t=P({data:a,columns:Z,getCoreRowModel:H()});return e.jsxs(p,{className:s,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{children:"Top Creators"}),e.jsx(m,{size:"sm",children:"View Creators"})]}),e.jsxs(f,{children:[e.jsx(q,{children:t.getHeaderGroups().map(o=>e.jsx(u,{children:o.headers.map(r=>e.jsx(K,{colSpan:r.colSpan,children:h(r.column.columnDef.header,r.getContext())},r.id))},o.id))}),e.jsx(_,{children:t.getRowModel().rows.map(o=>e.jsx(u,{children:o.getVisibleCells().map(r=>e.jsx(X,{children:h(r.column.columnDef.cell,r.getContext())},r.id))},o.id))})]})]})},se=()=>{const a=g(),s=l(r=>r.salesDashboard.data.dashboardData),t=l(r=>r.salesDashboard.data.loading);w.useEffect(()=>{o()},[]);const o=()=>{a(c())};return e.jsxs(y,{loading:t,children:[e.jsx(U,{data:s==null?void 0:s.statisticData}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(d,{data:s==null?void 0:s.salesReportData,className:"col-span-3",reportName:"Brand Growth"}),e.jsx(d,{data:s==null?void 0:s.salesReportData,className:"col-span-2",reportName:"Content"}),e.jsx(ee,{data:s==null?void 0:s.topProductsData})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:e.jsx(d,{data:s==null?void 0:s.salesReportData,className:"col-span-3",reportName:"Content engagment"})})]})};R("salesDashboard",L);const ae=()=>e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsx(J,{}),e.jsx(se,{})]}),Be=ae;export{Be as default};
