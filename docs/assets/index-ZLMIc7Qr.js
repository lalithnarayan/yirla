import{Q as b,T as B,U,V,f as j,r as u,j as r,d as k,W as h,a2 as q,Z as H,w as T,X as Q}from"./index-sFzf4xgK.js";import{T as K}from"./index-3yIQZUm3.js";import{A as G}from"./AdaptableCard-ZmpuYt9J.js";import{c as W}from"./CryptoService-au8rg8Nf.js";import{A as X}from"./index-l28G_51M.js";import{D as M}from"./DataTable-ZYz8MWbl.js";import{B as Y}from"./Button-7VCVZJfX.js";import{g as N}from"./GrowShrinkTag-1PBQ2zAj.js";import{N as x}from"./react-number-format.es-2TFZlsyx.js";import{D as Z}from"./Dialog-4z8jxMEB.js";import{T as _,P as J}from"./ProceedTrade-5GslQFtM.js";import{I as D}from"./Input-54qFW4_N.js";import{I as ee}from"./index.esm-a15joBQq.js";import{d as oe}from"./debounce-GOWtJoGU.js";import"./useControllableState-vYcyW9Gn.js";import"./Card-0NcWSoxi.js";import"./useMergeRef-Rt_Crb27.js";import"./Tooltip-2HBl8IKw.js";import"./index.esm-PEPNg8t8.js";import"./floating-ui.react-xe1dPT16.js";import"./floating-ui.dom-KU0eYpRY.js";import"./index-F1ElV9AB.js";import"./motion-JMywUYCu.js";import"./index-U7R5GIaq.js";import"./index.esm-iiyI-toU.js";import"./Pagination-gVOcxBx4.js";import"./Select-aeRvqRmw.js";import"./slicedToArray-IZTdWzIB.js";import"./unsupportedIterableToArray-RbDDH4Bc.js";import"./toConsumableArray-TeBove6f.js";import"./context-_X_Ia2Rl.js";import"./index-mB9DlPfx.js";import"./TableRowSkeleton-HTHbCOTH.js";import"./Skeleton-yp1ZlUZw.js";import"./index-7lD32DxE.js";import"./Tag-lEthrBg-.js";import"./index-PQBKoFWY.js";import"./index-mu0NPuvO.js";import"./CloseButton-Lwp70ThL.js";import"./index-yu8qkL3g.js";import"./formik.esm-uH6H_cO4.js";import"./Badge-N86Ykf_U.js";import"./chart.constant-jM3De4-L.js";import"./chart.config-na3HyKAJ.js";import"./Views-cMR82yL4.js";import"./FormNumericInput-h8-z46rV.js";import"./react-tooltip.min-fpjBnV96.js";import"./RichTextEditor-eYzbCh4G.js";import"./SegmentItemOption-qzlXrLUx.js";import"./useThemeClass-f5W2U2ER.js";import"./SvgIcon-7qk7H0mf.js";import"./index.esm-ng5xLdUg.js";import"./isNil-jxFxtNPR.js";const F="cryptoMarket",C=b(F+"/getMarketData",async t=>(await W(t)).data),R={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},re={loading:!0,marketData:[],tableData:R,selectedTab:"all",tradeDialogOpen:!1,selectedRow:{}},z=B({name:`${F}/state`,initialState:re,reducers:{setSelectedTab:(t,n)=>{t.selectedTab=n.payload},setTableData:(t,n)=>{t.tableData=n.payload},setMarketData:(t,n)=>{t.marketData=n.payload},toggleTradeDialog:(t,n)=>{t.tradeDialogOpen=n.payload},setSelectedRow:(t,n)=>{t.selectedRow=n.payload}},extraReducers:t=>{t.addCase(C.fulfilled,(n,s)=>{n.loading=!1,n.tableData.total=s.payload.total,n.marketData=s.payload.data}).addCase(C.pending,n=>{n.loading=!0})}}),{setSelectedTab:se,setTableData:d,setMarketData:te,toggleTradeDialog:A,setSelectedRow:P}=z.actions,ne=z.reducer,ae=U({data:ne}),y=V,I=({row:t})=>{const n=j(),s=u.useCallback(()=>{n(A(!0)),n(P(t))},[n,t]);return r.jsx("div",{className:"ltr:text-right rtl:text-left",children:r.jsx(Y,{size:"sm",onClick:s,children:"Trade"})})},ce=({data:t,loading:n,tableData:s})=>{const a=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{img:e,symbol:l,name:w}=o.row.original;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(X,{src:e,size:"sm",className:"!bg-transparent"}),r.jsx("span",{className:"font-bold heading-text",children:l}),r.jsx("span",{children:w})]})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),suffix:" USD",thousandSeparator:!0})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsxs("span",{children:[e,"M"]})}},{header:"Market Cap",accessorKey:"marketCap",cell:o=>{const{marketCap:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,a(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,a(d(e))},p=o=>{const e=h(s);e.sort=o,a(d(e))};return r.jsx(M,{columns:i,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28,className:"rounded-md"},loading:n,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},ie=({data:t,loading:n,tableData:s})=>{const a=q(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"24h Turnover",accessorKey:"turnOver",cell:o=>{const{turnOver:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,a(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,a(d(e))},p=o=>{const e=h(s);e.sort=o,a(d(e))};return r.jsx(M,{columns:i,data:t,loading:n,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},le=({data:t,loading:n,tableData:s})=>{const a=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,a(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,a(d(e))},p=o=>{const e=h(s);e.sort=o,a(d(e))};return r.jsx(M,{columns:i,data:t,loading:n,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},de=()=>{const t=j(),n=H(),s=y(m=>m.cryptoMarket.data.tradeDialogOpen),a=y(m=>m.cryptoMarket.data.selectedRow),[i,c]=u.useState({}),[g,p]=u.useState(!1),[o,e]=u.useState(""),l=()=>{t(A(!1)),setTimeout(()=>{t(P({})),c({}),p(!1),e("")},500)},w=(m,f,$)=>{f(!0),setTimeout(()=>{c({...m,type:$}),p(!1),e("")},500)},O=()=>{p(!0),setTimeout(()=>{e("SUCCESS")},1e3)},L=m=>{l(),m&&n("/app/crypto/wallets")};return r.jsxs(Z,{isOpen:s,closable:!o,width:400,onRequestClose:l,onClose:l,children:[r.jsxs("h5",{className:"mb-4",children:[T(i)&&!o&&`Trade ${a.symbol}`,!T(i)&&!o&&"Order preview"]}),T(i)?r.jsx(_,{amount:a.price,symbol:a.symbol,onBuy:(m,f)=>w(m,f,"BUY"),onSell:(m,f)=>w(m,f,"SELL")}):r.jsx(J,{loading:g,status:o,onConfirm:O,onDone:L,...i})]})},E=u.forwardRef(({onInputChange:t},n)=>{const s=oe(a,500);function a(c){t==null||t(c)}const i=c=>{s(c.target.value)};return r.jsx(D,{ref:n,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:r.jsx(ee,{className:"text-lg"}),onChange:i})});E.displayName="QueryInput";Q("cryptoMarket",ae);const{TabNav:S,TabList:pe,TabContent:v}=K,me=()=>{const t=j(),n=u.useRef(null),s=y(e=>e.cryptoMarket.data.marketData),a=y(e=>e.cryptoMarket.data.loading),i=y(e=>e.cryptoMarket.data.selectedTab),c=y(e=>e.cryptoMarket.data.tableData);u.useEffect(()=>{g()},[t,i,c]);const g=()=>{t(C({tab:i,...c}))},p=e=>{t(te([])),t(se(e)),t(d(R))},o=e=>{const l=h(c);l.query=e,l.pageIndex=1,typeof e=="string"&&e.length>1&&t(d(l)),typeof e=="string"&&e.length===0&&t(d(l))};return r.jsxs(r.Fragment,{children:[r.jsx(G,{children:r.jsxs(K,{value:i,variant:"pill",onChange:p,children:[r.jsxs("div",{className:"flex lg:items-center justify-between flex-col lg:flex-row gap-4",children:[r.jsxs(pe,{children:[r.jsx(S,{value:"all",children:"All"}),r.jsx(S,{value:"spot",children:"Spot"}),r.jsx(S,{value:"futures",children:"Futures"})]}),r.jsx(E,{ref:n,onInputChange:o})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(v,{value:"all",children:r.jsx(ce,{data:s,loading:a,tableData:c})}),r.jsx(v,{value:"spot",children:r.jsx(ie,{data:s,loading:a,tableData:c})}),r.jsx(v,{value:"futures",children:r.jsx(le,{data:s,loading:a,tableData:c})})]})]})}),r.jsx(de,{})]})},uo=me;export{uo as default};
