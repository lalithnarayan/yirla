import{r as i,aa as Oe,ab as Le}from"./index-sFzf4xgK.js";import{i as Ye,b as ee,c as Ge,d as D,g as ne,e as Xe,h as ge,j as Ze,k as Je}from"./floating-ui.dom-KU0eYpRY.js";function ce(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function V(t,e){if(!t||!e)return!1;const n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ye(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function Ae(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function Qe(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function ze(t){return!et()&&t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function De(){return/apple/i.test(navigator.vendor)}function et(){const t=/android/i;return t.test(Ae())||t.test(Qe())}function tt(){return Ae().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Z(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function nt(t){return"nativeEvent"in t}function rt(t){return t.matches("html,body")}function $(t){return(t==null?void 0:t.ownerDocument)||document}function re(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function q(t){return"composedPath"in t?t.composedPath()[0]:t.target}const ot="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Fe(t){return ee(t)&&t.matches(ot)}var X=typeof document<"u"?i.useLayoutEffect:i.useEffect;function J(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!J(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const u=o[r];if(!(u==="_owner"&&t.$$typeof)&&!J(t[u],e[u]))return!1}return!0}return t!==t&&e!==e}function Ne(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function be(t,e){const n=Ne(t);return Math.round(e*n)/n}function he(t){const e=i.useRef(t);return X(()=>{e.current=t}),e}function it(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:u,floating:s}={},transform:a=!0,whileElementsMounted:f,open:d}=t,[b,h]=i.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[E,c]=i.useState(r);J(E,r)||c(r);const[g,m]=i.useState(null),[S,C]=i.useState(null),P=i.useCallback(p=>{p!=T.current&&(T.current=p,m(p))},[m]),M=i.useCallback(p=>{p!==k.current&&(k.current=p,C(p))},[C]),x=u||g,y=s||S,T=i.useRef(null),k=i.useRef(null),_=i.useRef(b),N=he(f),F=he(o),I=i.useCallback(()=>{if(!T.current||!k.current)return;const p={placement:e,strategy:n,middleware:E};F.current&&(p.platform=F.current),Ge(T.current,k.current,p).then(R=>{const l={...R,isPositioned:!0};O.current&&!J(_.current,l)&&(_.current=l,Oe.flushSync(()=>{h(l)}))})},[E,e,n,F]);X(()=>{d===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(p=>({...p,isPositioned:!1})))},[d]);const O=i.useRef(!1);X(()=>(O.current=!0,()=>{O.current=!1}),[]),X(()=>{if(x&&(T.current=x),y&&(k.current=y),x&&y){if(N.current)return N.current(x,y,I);I()}},[x,y,I,N]);const L=i.useMemo(()=>({reference:T,floating:k,setReference:P,setFloating:M}),[P,M]),w=i.useMemo(()=>({reference:x,floating:y}),[x,y]),v=i.useMemo(()=>{const p={position:n,left:0,top:0};if(!w.floating)return p;const R=be(w.floating,b.x),l=be(w.floating,b.y);return a?{...p,transform:"translate("+R+"px, "+l+"px)",...Ne(w.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:R,top:l}},[n,a,w.floating,b.x,b.y]);return i.useMemo(()=>({...b,update:I,refs:L,elements:w,floatingStyles:v}),[b,I,L,w,v])}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var ut=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],le=ut.join(","),Ke=typeof Element>"u",Y=Ke?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Q=!Ke&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},z=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),u=o===""||o==="true",s=u||n&&e&&t(e.parentNode);return s},st=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},at=function(e,n,r){if(z(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(le));return n&&Y.call(e,le)&&o.unshift(e),o=o.filter(r),o},ct=function t(e,n,r){for(var o=[],u=Array.from(e);u.length;){var s=u.shift();if(!z(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),f=a.length?a:s.children,d=t(f,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:s,candidates:d})}else{var b=Y.call(s,le);b&&r.filter(s)&&(n||!e.includes(s))&&o.push(s);var h=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),E=!z(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(h&&E){var c=t(h===!0?s.children:h.children,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:s,candidates:c})}else u.unshift.apply(u,s.children)}}return o},_e=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Be=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||st(e))&&!_e(e)?0:e.tabIndex},lt=function(e,n){var r=Be(e);return r<0&&n&&!_e(e)?0:r},ft=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},We=function(e){return e.tagName==="INPUT"},dt=function(e){return We(e)&&e.type==="hidden"},vt=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},mt=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},pt=function(e){if(!e.name)return!0;var n=e.form||Q(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var u=mt(o,e.form);return!u||u===e},gt=function(e){return We(e)&&e.type==="radio"},bt=function(e){return gt(e)&&!pt(e)},ht=function(e){var n,r=e&&Q(e),o=(n=r)===null||n===void 0?void 0:n.host,u=!1;if(r&&r!==e){var s,a,f;for(u=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(f=e.ownerDocument)!==null&&f!==void 0&&f.contains(e));!u&&o;){var d,b,h;r=Q(o),o=(d=r)===null||d===void 0?void 0:d.host,u=!!((b=o)!==null&&b!==void 0&&(h=b.ownerDocument)!==null&&h!==void 0&&h.contains(o))}}return u},Ee=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Et=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var u=Y.call(e,"details>summary:first-of-type"),s=u?e.parentElement:e;if(Y.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var a=e;e;){var f=e.parentElement,d=Q(e);if(f&&!f.shadowRoot&&o(f)===!0)return Ee(e);e.assignedSlot?e=e.assignedSlot:!f&&d!==e.ownerDocument?e=d.host:e=f}e=a}if(ht(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ee(e);return!1},yt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return Y.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},Rt=function(e,n){return!(n.disabled||z(n)||dt(n)||Et(n,e)||vt(n)||yt(n))},ye=function(e,n){return!(bt(n)||Be(n)<0||!Rt(e,n))},wt=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},xt=function t(e){var n=[],r=[];return e.forEach(function(o,u){var s=!!o.scopeParent,a=s?o.scopeParent:o,f=lt(a,s),d=s?t(o.candidates):a;f===0?s?n.push.apply(n,d):n.push(a):r.push({documentOrder:u,tabIndex:f,item:o,isScope:s,content:d})}),r.sort(ft).reduce(function(o,u){return u.isScope?o.push.apply(o,u.content):o.push(u.content),o},[]).concat(n)},$e=function(e,n){n=n||{};var r;return n.getShadowRoot?r=ct([e],n.includeContainer,{filter:ye.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:wt}):r=at(e,n.includeContainer,ye.bind(null,n)),xt(r)};const Tt=Le.useInsertionEffect,Ct=Tt||(t=>t());function H(t){const e=i.useRef(()=>{});return Ct(()=>{e.current=t}),i.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var j=typeof document<"u"?i.useLayoutEffect:i.useEffect;function fe(){return fe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fe.apply(this,arguments)}let oe=!1,St=0;const Re=()=>"floating-ui-"+St++;function Pt(){const[t,e]=i.useState(()=>oe?Re():void 0);return j(()=>{t==null&&e(Re())},[]),i.useEffect(()=>{oe||(oe=!0)},[]),t}const It=Le.useId,de=It||Pt;function kt(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const Mt=i.createContext(null),Ot=i.createContext(null),ve=()=>{var t;return((t=i.useContext(Mt))==null?void 0:t.id)||null},me=()=>i.useContext(Ot);function G(t){return"data-floating-ui-"+t}function we(t){const e=i.useRef(t);return j(()=>{e.current=t}),e}const xe=G("safe-polygon");function ie(t,e,n){return n&&!Z(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function Vt(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:u,elements:{domReference:s,floating:a},refs:f}=t,{enabled:d=!0,delay:b=0,handleClose:h=null,mouseOnly:E=!1,restMs:c=0,move:g=!0}=e,m=me(),S=ve(),C=we(h),P=we(b),M=i.useRef(),x=i.useRef(),y=i.useRef(),T=i.useRef(),k=i.useRef(!0),_=i.useRef(!1),N=i.useRef(()=>{}),F=i.useCallback(()=>{var w;const v=(w=o.current.openEvent)==null?void 0:w.type;return(v==null?void 0:v.includes("mouse"))&&v!=="mousedown"},[o]);i.useEffect(()=>{if(!d)return;function w(v){let{open:p}=v;p||(clearTimeout(x.current),clearTimeout(T.current),k.current=!0)}return u.on("openchange",w),()=>{u.off("openchange",w)}},[d,u]),i.useEffect(()=>{if(!d||!C.current||!n)return;function w(p){F()&&r(!1,p,"hover")}const v=$(a).documentElement;return v.addEventListener("mouseleave",w),()=>{v.removeEventListener("mouseleave",w)}},[a,n,r,d,C,o,F]);const I=i.useCallback(function(w,v,p){v===void 0&&(v=!0),p===void 0&&(p="hover");const R=ie(P.current,"close",M.current);R&&!y.current?(clearTimeout(x.current),x.current=setTimeout(()=>r(!1,w,p),R)):v&&(clearTimeout(x.current),r(!1,w,p))},[P,r]),O=i.useCallback(()=>{N.current(),y.current=void 0},[]),L=i.useCallback(()=>{if(_.current){const w=$(f.floating.current).body;w.style.pointerEvents="",w.removeAttribute(xe),_.current=!1}},[f]);return i.useEffect(()=>{if(!d)return;function w(){return o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1}function v(l){if(clearTimeout(x.current),k.current=!1,E&&!Z(M.current)||c>0&&ie(P.current,"open")===0)return;const A=ie(P.current,"open",M.current);A?x.current=setTimeout(()=>{r(!0,l,"hover")},A):r(!0,l,"hover")}function p(l){if(w())return;N.current();const A=$(a);if(clearTimeout(T.current),C.current){n||clearTimeout(x.current),y.current=C.current({...t,tree:m,x:l.clientX,y:l.clientY,onClose(){L(),O(),I(l,!0,"safe-polygon")}});const B=y.current;A.addEventListener("mousemove",B),N.current=()=>{A.removeEventListener("mousemove",B)};return}(M.current==="touch"?!V(a,l.relatedTarget):!0)&&I(l)}function R(l){w()||C.current==null||C.current({...t,tree:m,x:l.clientX,y:l.clientY,onClose(){L(),O(),I(l)}})(l)}if(D(s)){const l=s;return n&&l.addEventListener("mouseleave",R),a==null||a.addEventListener("mouseleave",R),g&&l.addEventListener("mousemove",v,{once:!0}),l.addEventListener("mouseenter",v),l.addEventListener("mouseleave",p),()=>{n&&l.removeEventListener("mouseleave",R),a==null||a.removeEventListener("mouseleave",R),g&&l.removeEventListener("mousemove",v),l.removeEventListener("mouseenter",v),l.removeEventListener("mouseleave",p)}}},[s,a,d,t,E,c,g,I,O,L,r,n,m,P,C,o]),j(()=>{var w;if(d&&n&&(w=C.current)!=null&&w.__options.blockPointerEvents&&F()){const p=$(a).body;if(p.setAttribute(xe,""),p.style.pointerEvents="none",_.current=!0,D(s)&&a){var v;const R=s,l=m==null||(v=m.nodesRef.current.find(A=>A.id===S))==null||(v=v.context)==null?void 0:v.elements.floating;return l&&(l.style.pointerEvents=""),R.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{R.style.pointerEvents="",a.style.pointerEvents=""}}}},[d,n,S,a,s,m,C,o,F]),j(()=>{n||(M.current=void 0,O(),L())},[n,O,L]),i.useEffect(()=>()=>{O(),clearTimeout(x.current),clearTimeout(T.current),L()},[d,s,O,L]),i.useMemo(()=>{if(!d)return{};function w(v){M.current=v.pointerType}return{reference:{onPointerDown:w,onPointerEnter:w,onMouseMove(v){n||c===0||(clearTimeout(T.current),T.current=setTimeout(()=>{k.current||r(!0,v.nativeEvent,"hover")},c))}},floating:{onMouseEnter(){clearTimeout(x.current)},onMouseLeave(v){I(v.nativeEvent,!1)}}}},[d,c,n,r,I])}function ue(t,e){let n=t.filter(o=>{var u;return o.parentId===e&&((u=o.context)==null?void 0:u.open)}),r=n;for(;r.length;)r=t.filter(o=>{var u;return(u=r)==null?void 0:u.some(s=>{var a;return o.parentId===s.id&&((a=o.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const je=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function qe(t,e){const n=$e(t,je());e==="prev"&&n.reverse();const r=n.indexOf(ce($(t)));return n.slice(r+1)[0]}function Lt(){return qe(document.body,"next")}function At(){return qe(document.body,"prev")}function se(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!V(n,r)}function Dt(t){$e(t,je()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Ft(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const He={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let Nt;function Te(t){t.key==="Tab"&&(t.target,clearTimeout(Nt))}const Ce=i.forwardRef(function(e,n){const[r,o]=i.useState();j(()=>(De()&&o("button"),document.addEventListener("keydown",Te),()=>{document.removeEventListener("keydown",Te)}),[]);const u={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[G("focus-guard")]:"",style:He};return i.createElement("span",fe({},e,u))}),Ve=i.createContext(null);function Kt(t){let{id:e,root:n}=t===void 0?{}:t;const[r,o]=i.useState(null),u=de(),s=_t(),a=i.useMemo(()=>({id:e,root:n,portalContext:s,uniqueId:u}),[e,n,s,u]),f=i.useRef();return j(()=>()=>{r==null||r.remove()},[r,a]),j(()=>{if(f.current===a)return;f.current=a;const{id:d,root:b,portalContext:h,uniqueId:E}=a,c=d?document.getElementById(d):null,g=G("portal");if(c){const m=document.createElement("div");m.id=E,m.setAttribute(g,""),c.appendChild(m),o(m)}else{let m=b||(h==null?void 0:h.portalNode);m&&!D(m)&&(m=m.current),m=m||document.body;let S=null;d&&(S=document.createElement("div"),S.id=d,m.appendChild(S));const C=document.createElement("div");C.id=E,C.setAttribute(g,""),m=S||m,m.appendChild(C),o(C)}},[a]),r}function Ut(t){let{children:e,id:n,root:r=null,preserveTabOrder:o=!0}=t;const u=Kt({id:n,root:r}),[s,a]=i.useState(null),f=i.useRef(null),d=i.useRef(null),b=i.useRef(null),h=i.useRef(null),E=!!s&&!s.modal&&s.open&&o&&!!(r||u);return i.useEffect(()=>{if(!u||!o||s!=null&&s.modal)return;function c(g){u&&se(g)&&(g.type==="focusin"?Ft:Dt)(u)}return u.addEventListener("focusin",c,!0),u.addEventListener("focusout",c,!0),()=>{u.removeEventListener("focusin",c,!0),u.removeEventListener("focusout",c,!0)}},[u,o,s==null?void 0:s.modal]),i.createElement(Ve.Provider,{value:i.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:f,afterOutsideRef:d,beforeInsideRef:b,afterInsideRef:h,portalNode:u,setFocusManagerState:a}),[o,u])},E&&u&&i.createElement(Ce,{"data-type":"outside",ref:f,onFocus:c=>{if(se(c,u)){var g;(g=b.current)==null||g.focus()}else{const m=At()||(s==null?void 0:s.refs.domReference.current);m==null||m.focus()}}}),E&&u&&i.createElement("span",{"aria-owns":u.id,style:He}),u&&Oe.createPortal(e,u),E&&u&&i.createElement(Ce,{"data-type":"outside",ref:d,onFocus:c=>{if(se(c,u)){var g;(g=h.current)==null||g.focus()}else{const m=Lt()||(s==null?void 0:s.refs.domReference.current);m==null||m.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,c.nativeEvent))}}}))}const _t=()=>i.useContext(Ve);function Se(t){return ee(t.target)&&t.target.tagName==="BUTTON"}function Pe(t){return Fe(t)}function Yt(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:u}}=t,{enabled:s=!0,event:a="click",toggle:f=!0,ignoreMouse:d=!1,keyboardHandlers:b=!0}=e,h=i.useRef(),E=i.useRef(!1);return i.useMemo(()=>s?{reference:{onPointerDown(c){h.current=c.pointerType},onMouseDown(c){c.button===0&&(Z(h.current,!0)&&d||a!=="click"&&(n&&f&&(!o.current.openEvent||o.current.openEvent.type==="mousedown")?r(!1,c.nativeEvent,"click"):(c.preventDefault(),r(!0,c.nativeEvent,"click"))))},onClick(c){if(a==="mousedown"&&h.current){h.current=void 0;return}Z(h.current,!0)&&d||(n&&f&&(!o.current.openEvent||o.current.openEvent.type==="click")?r(!1,c.nativeEvent,"click"):r(!0,c.nativeEvent,"click"))},onKeyDown(c){h.current=void 0,!(c.defaultPrevented||!b||Se(c))&&(c.key===" "&&!Pe(u)&&(c.preventDefault(),E.current=!0),c.key==="Enter"&&r(!(n&&f),c.nativeEvent,"click"))},onKeyUp(c){c.defaultPrevented||!b||Se(c)||Pe(u)||c.key===" "&&E.current&&(E.current=!1,r(!(n&&f),c.nativeEvent,"click"))}}}:{},[s,o,a,d,b,u,f,n,r])}const Bt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Wt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ie=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Gt(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,nodeId:o,elements:{reference:u,domReference:s,floating:a},dataRef:f}=t,{enabled:d=!0,escapeKey:b=!0,outsidePress:h=!0,outsidePressEvent:E="pointerdown",referencePress:c=!1,referencePressEvent:g="pointerdown",ancestorScroll:m=!1,bubbles:S,capture:C}=e,P=me(),M=H(typeof h=="function"?h:()=>!1),x=typeof h=="function"?M:h,y=i.useRef(!1),T=i.useRef(!1),{escapeKey:k,outsidePress:_}=Ie(S),{escapeKey:N,outsidePress:F}=Ie(C),I=H(v=>{if(!n||!d||!b||v.key!=="Escape")return;const p=P?ue(P.nodesRef.current,o):[];if(!k&&(v.stopPropagation(),p.length>0)){let R=!0;if(p.forEach(l=>{var A;if((A=l.context)!=null&&A.open&&!l.context.dataRef.current.__escapeKeyBubbles){R=!1;return}}),!R)return}r(!1,nt(v)?v.nativeEvent:v,"escape-key")}),O=H(v=>{var p;const R=()=>{var l;I(v),(l=q(v))==null||l.removeEventListener("keydown",R)};(p=q(v))==null||p.addEventListener("keydown",R)}),L=H(v=>{const p=y.current;y.current=!1;const R=T.current;if(T.current=!1,E==="click"&&R||p||typeof x=="function"&&!x(v))return;const l=q(v),A="["+G("inert")+"]",te=$(a).querySelectorAll(A);let B=D(l)?l:null;for(;B&&!ge(B);){const K=Ze(B);if(ge(K)||!D(K))break;B=K}if(te.length&&D(l)&&!rt(l)&&!V(l,a)&&Array.from(te).every(K=>!V(B,K)))return;if(ee(l)&&a){const K=l.clientWidth>0&&l.scrollWidth>l.clientWidth,W=l.clientHeight>0&&l.scrollHeight>l.clientHeight;let U=W&&v.offsetX>l.clientWidth;if(W&&Je(l).direction==="rtl"&&(U=v.offsetX<=l.offsetWidth-l.clientWidth),U||K&&v.offsetY>l.clientHeight)return}const Ue=P&&ue(P.nodesRef.current,o).some(K=>{var W;return re(v,(W=K.context)==null?void 0:W.elements.floating)});if(re(v,a)||re(v,s)||Ue)return;const pe=P?ue(P.nodesRef.current,o):[];if(pe.length>0){let K=!0;if(pe.forEach(W=>{var U;if((U=W.context)!=null&&U.open&&!W.context.dataRef.current.__outsidePressBubbles){K=!1;return}}),!K)return}r(!1,v,"outside-press")}),w=H(v=>{var p;const R=()=>{var l;L(v),(l=q(v))==null||l.removeEventListener(E,R)};(p=q(v))==null||p.addEventListener(E,R)});return i.useEffect(()=>{if(!n||!d)return;f.current.__escapeKeyBubbles=k,f.current.__outsidePressBubbles=_;function v(l){r(!1,l,"ancestor-scroll")}const p=$(a);b&&p.addEventListener("keydown",N?O:I,N),x&&p.addEventListener(E,F?w:L,F);let R=[];return m&&(D(s)&&(R=ne(s)),D(a)&&(R=R.concat(ne(a))),!D(u)&&u&&u.contextElement&&(R=R.concat(ne(u.contextElement)))),R=R.filter(l=>{var A;return l!==((A=p.defaultView)==null?void 0:A.visualViewport)}),R.forEach(l=>{l.addEventListener("scroll",v,{passive:!0})}),()=>{b&&p.removeEventListener("keydown",N?O:I,N),x&&p.removeEventListener(E,F?w:L,F),R.forEach(l=>{l.removeEventListener("scroll",v)})}},[f,a,s,u,b,x,E,n,r,m,d,k,_,I,N,O,L,F,w]),i.useEffect(()=>{y.current=!1},[x,E]),i.useMemo(()=>d?{reference:{onKeyDown:I,[Bt[g]]:v=>{c&&r(!1,v.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){T.current=!0},onMouseUp(){T.current=!0},[Wt[E]]:()=>{y.current=!0}}}:{},[d,c,E,g,r,I])}function Xt(t){var e;t===void 0&&(t={});const{open:n=!1,onOpenChange:r,nodeId:o}=t,[u,s]=i.useState(null),a=((e=t.elements)==null?void 0:e.reference)||u,f=it(t),d=me(),b=ve()!=null,h=H((y,T,k)=>{y&&(c.current.openEvent=T),g.emit("openchange",{open:y,event:T,reason:k,nested:b}),r==null||r(y,T,k)}),E=i.useRef(null),c=i.useRef({}),g=i.useState(()=>kt())[0],m=de(),S=i.useCallback(y=>{const T=D(y)?{getBoundingClientRect:()=>y.getBoundingClientRect(),contextElement:y}:y;f.refs.setReference(T)},[f.refs]),C=i.useCallback(y=>{(D(y)||y===null)&&(E.current=y,s(y)),(D(f.refs.reference.current)||f.refs.reference.current===null||y!==null&&!D(y))&&f.refs.setReference(y)},[f.refs]),P=i.useMemo(()=>({...f.refs,setReference:C,setPositionReference:S,domReference:E}),[f.refs,C,S]),M=i.useMemo(()=>({...f.elements,domReference:a}),[f.elements,a]),x=i.useMemo(()=>({...f,refs:P,elements:M,dataRef:c,nodeId:o,floatingId:m,events:g,open:n,onOpenChange:h}),[f,o,m,g,n,h,P,M]);return j(()=>{const y=d==null?void 0:d.nodesRef.current.find(T=>T.id===o);y&&(y.context=x)}),i.useMemo(()=>({...f,context:x,refs:P,elements:M}),[f,P,M,x])}function Zt(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,refs:u,elements:{floating:s,domReference:a}}=t,{enabled:f=!0,visibleOnly:d=!0}=e,b=i.useRef(!1),h=i.useRef(),E=i.useRef(!0);return i.useEffect(()=>{if(!f)return;const c=Xe(a);function g(){!n&&ee(a)&&a===ce($(a))&&(b.current=!0)}function m(){E.current=!0}return c.addEventListener("blur",g),c.addEventListener("keydown",m,!0),()=>{c.removeEventListener("blur",g),c.removeEventListener("keydown",m,!0)}},[s,a,n,f]),i.useEffect(()=>{if(!f)return;function c(g){let{reason:m}=g;(m==="reference-press"||m==="escape-key")&&(b.current=!0)}return o.on("openchange",c),()=>{o.off("openchange",c)}},[o,f]),i.useEffect(()=>()=>{clearTimeout(h.current)},[]),i.useMemo(()=>f?{reference:{onPointerDown(c){ze(c.nativeEvent)||(E.current=!1)},onMouseLeave(){b.current=!1},onFocus(c){if(b.current)return;const g=q(c.nativeEvent);if(d&&D(g))try{if(De()&&tt())throw Error();if(!g.matches(":focus-visible"))return}catch{if(!E.current&&!Fe(g))return}r(!0,c.nativeEvent,"focus")},onBlur(c){b.current=!1;const g=c.relatedTarget,m=D(g)&&g.hasAttribute(G("focus-guard"))&&g.getAttribute("data-type")==="outside";h.current=window.setTimeout(()=>{const S=ce(a?a.ownerDocument:document);!g&&S===a||V(u.floating.current,g)||V(a,g)||m||r(!1,c.nativeEvent,"focus")})}}}:{},[f,d,a,u,r])}const ke="active",Me="selected";function ae(t,e,n){const r=new Map,o=n==="item";let u=t;if(o&&t){const{[ke]:s,[Me]:a,...f}=t;u=f}return{...n==="floating"&&{tabIndex:-1},...u,...e.map(s=>{const a=s?s[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((s,a)=>(a&&Object.entries(a).forEach(f=>{let[d,b]=f;if(!(o&&[ke,Me].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof b=="function"){var h;(h=r.get(d))==null||h.push(b),s[d]=function(){for(var E,c=arguments.length,g=new Array(c),m=0;m<c;m++)g[m]=arguments[m];return(E=r.get(d))==null?void 0:E.map(S=>S(...g)).find(S=>S!==void 0)}}}else s[d]=b}),s),{})}}function Jt(t){t===void 0&&(t=[]);const e=t,n=i.useCallback(u=>ae(u,t,"reference"),e),r=i.useCallback(u=>ae(u,t,"floating"),e),o=i.useCallback(u=>ae(u,t,"item"),t.map(u=>u==null?void 0:u.item));return i.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:o}),[n,r,o])}const $t=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Qt(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:u=!0,role:s="dialog"}=e,a=(n=$t.get(s))!=null?n:s,f=de(),b=ve()!=null;return i.useMemo(()=>{if(!u)return{};const h={id:o,...a&&{role:a}};return a==="tooltip"||s==="label"?{reference:{["aria-"+(s==="label"?"labelledby":"describedby")]:r?o:void 0},floating:h}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?o:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:f},...a==="menu"&&b&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},floating:{...h,...a==="menu"&&{"aria-labelledby":f}},item(E){let{active:c,selected:g}=E;const m={role:"option",...c&&{id:o+"-option"}};switch(s){case"select":return{...m,"aria-selected":c&&g};case"combobox":return{...m,...c&&{"aria-selected":!0}}}return{}}}},[u,s,a,r,o,f,b])}export{Ut as F,Vt as a,Zt as b,Gt as c,Qt as d,Jt as e,Yt as f,de as g,Xt as u};
