import{Q as H,T as K,U as $,V as q,f as b,j as e,r as x,Z as V,W as y,L as w,X as G}from"./index-sFzf4xgK.js";import{a as _,b as Q}from"./SalesService-Q3Tn9uFR.js";import{A as W}from"./AdaptableCard-ZmpuYt9J.js";import{A as F}from"./index-l28G_51M.js";import{B as J}from"./Badge-N86Ykf_U.js";import{D as U}from"./DataTable-ZYz8MWbl.js";import{_ as X,a0 as Z,I as k,J as Y,ab as ee,K as te}from"./index.esm-a15joBQq.js";import{a as se}from"./index.esm-jZSZvgvt.js";import{u as ae}from"./useThemeClass-f5W2U2ER.js";import{t as re,N as oe}from"./Notification-Osm0sSHx.js";import{C as ne}from"./ConfirmDialog-dUTTJxAI.js";import{B as j}from"./Button-7VCVZJfX.js";import{I as L}from"./Input-54qFW4_N.js";import{d as le}from"./debounce-GOWtJoGU.js";import{F as ce,a as ie,b as de,c as C,d as D}from"./formik.esm-uH6H_cO4.js";import{C as p}from"./index-mB9DlPfx.js";import{R as P}from"./index-aUVoUGWO.js";import{D as me}from"./Drawer-ERN9elZs.js";import"./Card-0NcWSoxi.js";import"./useMergeRef-Rt_Crb27.js";import"./Tooltip-2HBl8IKw.js";import"./index.esm-PEPNg8t8.js";import"./floating-ui.react-xe1dPT16.js";import"./floating-ui.dom-KU0eYpRY.js";import"./index-F1ElV9AB.js";import"./motion-JMywUYCu.js";import"./index-U7R5GIaq.js";import"./index.esm-iiyI-toU.js";import"./Pagination-gVOcxBx4.js";import"./Select-aeRvqRmw.js";import"./slicedToArray-IZTdWzIB.js";import"./unsupportedIterableToArray-RbDDH4Bc.js";import"./toConsumableArray-TeBove6f.js";import"./context-_X_Ia2Rl.js";import"./TableRowSkeleton-HTHbCOTH.js";import"./Skeleton-yp1ZlUZw.js";import"./index-7lD32DxE.js";import"./chainedFunction-ltcSYACe.js";import"./StatusIcon-L39cXky5.js";import"./CloseButton-Lwp70ThL.js";import"./Dialog-4z8jxMEB.js";import"./index-PQBKoFWY.js";import"./index-mu0NPuvO.js";import"./isNil-jxFxtNPR.js";const T="salesProductList",f=H(T+"/getProducts",async t=>(await _(t)).data),ue=async t=>(await Q(t)).data,I={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},pe={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:I,filterData:{name:"",category:["bags","cloths","devices","shoes","watches"],status:[0,1,2],productStatus:0}},R=K({name:`${T}/state`,initialState:pe,reducers:{updateProductList:(t,s)=>{t.productList=s.payload},setTableData:(t,s)=>{t.tableData=s.payload},setFilterData:(t,s)=>{t.filterData=s.payload},toggleDeleteConfirmation:(t,s)=>{t.deleteConfirmation=s.payload},setSelectedProduct:(t,s)=>{t.selectedProduct=s.payload}},extraReducers:t=>{t.addCase(f.fulfilled,(s,l)=>{s.productList=l.payload.data,s.tableData.total=l.payload.total,s.loading=!1}).addCase(f.pending,s=>{s.loading=!0})}}),{updateProductList:ft,setTableData:N,setFilterData:xe,toggleDeleteConfirmation:S,setSelectedProduct:he}=R.actions,ge=R.reducer,fe=$({data:ge}),h=q,je=()=>{const t=b(),s=h(i=>i.salesProductList.data.deleteConfirmation),l=h(i=>i.salesProductList.data.selectedProduct),m=h(i=>i.salesProductList.data.tableData),c=()=>{t(S(!1))},o=async()=>{t(S(!1)),await ue({id:l})&&(t(f(m)),re.push(e.jsx(oe,{title:"Successfuly Deleted",type:"success",duration:2500,children:"Product successfuly deleted"}),{placement:"top-center"}))};return e.jsx(ne,{isOpen:s,type:"danger",title:"Delete product",confirmButtonColor:"red-600",onClose:c,onRequestClose:c,onCancel:c,onConfirm:o,children:e.jsx("p",{children:"Are you sure you want to delete this product? All record related to this product will be deleted as well. This action cannot be undone."})})},v={0:{label:"Deal",dotClass:"bg-emerald-500",textClass:"text-emerald-500"},1:{label:"In Talks",dotClass:"bg-amber-500",textClass:"text-amber-500"},2:{label:"No deal",dotClass:"bg-red-500",textClass:"text-red-500"}},be=({row:t})=>{const s=b(),{textTheme:l}=ae(),m=V(),c=()=>{m(`/app/sales/product-edit/${t.id}`)},o=()=>{s(S(!0)),s(he(t.id))};return e.jsxs("div",{className:"flex justify-end text-lg",children:[e.jsx("span",{className:`cursor-pointer p-2 hover:${l}`,onClick:c,children:e.jsx(X,{})}),e.jsx("span",{className:"cursor-pointer p-2 hover:text-red-500",onClick:o,children:e.jsx(Z,{})})]})},Ce=({row:t})=>{const s=t.img?e.jsx(F,{src:t.img}):e.jsx(F,{icon:e.jsx(se,{})});return e.jsxs("div",{className:"flex items-center",children:[s,e.jsx("span",{className:"ml-2 rtl:mr-2 font-semibold",children:t.name})]})},De=()=>{const t=x.useRef(null),s=b(),{pageIndex:l,pageSize:m,sort:c,query:o,total:i}=h(r=>r.salesProductList.data.tableData),a=h(r=>r.salesProductList.data.filterData),n=h(r=>r.salesProductList.data.loading),g=h(r=>r.salesProductList.data.productList);x.useEffect(()=>{z()},[l,m,c]),x.useEffect(()=>{var r;t&&((r=t.current)==null||r.resetSorting())},[a]);const u=x.useMemo(()=>({pageIndex:l,pageSize:m,sort:c,query:o,total:i}),[l,m,c,o,i]),z=()=>{s(f({pageIndex:l,pageSize:m,sort:c,query:o,filterData:a}))},O=x.useMemo(()=>[{header:"Name",accessorKey:"name",cell:r=>{const d=r.row.original;return e.jsx(Ce,{row:d})}},{header:"Promoted to Creator date",accessorKey:"created"},{header:"Price",accessorKey:"price",cell:r=>{const{price:d}=r.row.original;return e.jsxs("span",{children:["$",d]})}},{header:"Status",accessorKey:"status",cell:r=>{const{status:d}=r.row.original;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:v[d].dotClass}),e.jsx("span",{className:`capitalize font-semibold ${v[d].textClass}`,children:v[d].label})]})}},{header:"",id:"action",cell:r=>e.jsx(be,{row:r.row.original})}],[]),E=r=>{const d=y(u);d.pageIndex=r,s(N(d))},M=r=>{const d=y(u);d.pageSize=Number(r),d.pageIndex=1,s(N(d))},B=r=>{const d=y(u);d.sort=r,s(N(d))};return e.jsxs(e.Fragment,{children:[e.jsx(U,{ref:t,columns:O,data:g,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:n,pagingData:{total:u.total,pageIndex:u.pageIndex,pageSize:u.pageSize},onPaginationChange:E,onSelectChange:M,onSort:B}),e.jsx(je,{})]})},Pe=()=>{const t=b(),s=x.useRef(null),l=h(a=>a.salesProductList.data.tableData),m=le(c,500);function c(a){const n=y(l);n.query=a,n.pageIndex=1,typeof a=="string"&&a.length>1&&o(n),typeof a=="string"&&a.length===0&&o(n)}const o=a=>{t(N(a)),t(f(a))},i=a=>{m(a.target.value)};return e.jsx(L,{ref:s,className:"max-w-md md:w-52 md:mb-0 mb-4",size:"sm",placeholder:"Search customer",prefix:e.jsx(k,{className:"text-lg"}),onChange:i})},A=x.forwardRef(({onSubmitComplete:t},s)=>{const l=b(),m=h(o=>o.salesProductList.data.filterData),c=o=>{t==null||t(),l(xe(o)),l(f(I))};return e.jsx(ce,{enableReinitialize:!0,innerRef:s,initialValues:m,onSubmit:o=>{c(o)},children:({values:o,touched:i,errors:a})=>e.jsx(ie,{children:e.jsxs(de,{children:[e.jsxs(C,{invalid:a.name&&i.name,errorMessage:a.name,children:[e.jsx("h6",{className:"mb-4",children:"Included text"}),e.jsx(D,{type:"text",autoComplete:"off",name:"name",placeholder:"Keyword",component:L,prefix:e.jsx(k,{className:"text-lg"})})]}),e.jsxs(C,{invalid:a.category&&i.category,errorMessage:a.category,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(D,{name:"category",children:({field:n,form:g})=>e.jsx(e.Fragment,{children:e.jsxs(p.Group,{vertical:!0,value:o.category,onChange:u=>g.setFieldValue(n.name,u),children:[e.jsxs(p,{className:"mb-3",name:n.name,value:"bags",children:["Bags"," "]}),e.jsxs(p,{className:"mb-3",name:n.name,value:"cloths",children:["Cloths"," "]}),e.jsxs(p,{className:"mb-3",name:n.name,value:"devices",children:["Devices"," "]}),e.jsxs(p,{className:"mb-3",name:n.name,value:"shoes",children:["Shoes"," "]}),e.jsxs(p,{name:n.name,value:"watches",children:["Watches"," "]})]})})})]}),e.jsxs(C,{invalid:a.status&&i.status,errorMessage:a.status,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(D,{name:"status",children:({field:n,form:g})=>e.jsx(e.Fragment,{children:e.jsxs(p.Group,{vertical:!0,value:o.status,onChange:u=>g.setFieldValue(n.name,u),children:[e.jsxs(p,{className:"mb-3",name:n.name,value:0,children:["In Stock"," "]}),e.jsxs(p,{className:"mb-3",name:n.name,value:1,children:["Limited"," "]}),e.jsxs(p,{className:"mb-3",name:n.name,value:2,children:["Out Of Stock"," "]})]})})})]}),e.jsxs(C,{invalid:a.productStatus&&i.productStatus,errorMessage:a.productStatus,children:[e.jsx("h6",{className:"mb-4",children:"Product Status"}),e.jsx(D,{name:"productStatus",children:({field:n,form:g})=>e.jsxs(P.Group,{vertical:!0,value:o.productStatus,onChange:u=>g.setFieldValue(n.name,u),children:[e.jsx(P,{value:0,children:"Published"}),e.jsx(P,{value:1,children:"Disabled"}),e.jsx(P,{value:2,children:"Archive"})]})})]})]})})})}),ye=({onSaveClick:t,onCancel:s})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(j,{size:"sm",className:"mr-2",onClick:s,children:"Cancel"}),e.jsx(j,{size:"sm",variant:"solid",onClick:t,children:"Query"})]}),Ne=()=>{const t=x.useRef(null),[s,l]=x.useState(!1),m=()=>{l(!0)},c=()=>{l(!1)},o=()=>{var i;(i=t.current)==null||i.submitForm()};return e.jsxs(e.Fragment,{children:[e.jsx(j,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:e.jsx(Y,{}),onClick:()=>m(),children:"Filter"}),e.jsx(me,{title:"Filter",isOpen:s,footer:e.jsx(ye,{onCancel:c,onSaveClick:o}),onClose:c,onRequestClose:c,children:e.jsx(A,{ref:t,onSubmitComplete:c})})]})};A.displayName="FilterForm";const ve=()=>e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[e.jsx(Pe,{}),e.jsx(Ne,{}),e.jsx(w,{download:!0,className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",to:"/data/product-list.csv",target:"_blank",children:e.jsx(j,{block:!0,size:"sm",icon:e.jsx(ee,{}),children:"Export"})}),e.jsx(w,{className:"block lg:inline-block md:mb-0 mb-4",to:"/app/sales/product-new",children:e.jsx(j,{block:!0,variant:"solid",size:"sm",icon:e.jsx(te,{}),children:"Add Creator"})})]});G("salesProductList",fe);const Se=()=>e.jsxs(W,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Creators"}),e.jsx(ve,{})]}),e.jsx(De,{})]}),jt=Se;export{jt as default};
