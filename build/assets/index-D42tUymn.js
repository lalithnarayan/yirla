import{Q as M,T as G,U as V,V as q,f as P,j as e,r as h,W as C,L as v,X as B}from"./index-sFzf4xgK.js";import{a as H,b as U}from"./SalesService-Q3Tn9uFR.js";import{A as _}from"./AdaptableCard-ZmpuYt9J.js";import{A as N}from"./index-l28G_51M.js";import{D as Q}from"./DataTable-ZYz8MWbl.js";import{a as W}from"./index.esm-jZSZvgvt.js";import{t as $,N as J}from"./Notification-Osm0sSHx.js";import{C as X}from"./ConfirmDialog-dUTTJxAI.js";import{B as b}from"./Button-7VCVZJfX.js";import{I as F,J as Y,j as Z,K as ee}from"./index.esm-a15joBQq.js";import{I as L}from"./Input-54qFW4_N.js";import{d as te}from"./debounce-GOWtJoGU.js";import{F as ae,a as se,b as re,c as j,d as y}from"./formik.esm-uH6H_cO4.js";import{C as p}from"./index-mB9DlPfx.js";import{R as D}from"./index-aUVoUGWO.js";import{D as oe}from"./Drawer-ERN9elZs.js";import"./Card-0NcWSoxi.js";import"./useMergeRef-Rt_Crb27.js";import"./Tooltip-2HBl8IKw.js";import"./index.esm-PEPNg8t8.js";import"./floating-ui.react-xe1dPT16.js";import"./floating-ui.dom-KU0eYpRY.js";import"./index-F1ElV9AB.js";import"./motion-JMywUYCu.js";import"./index-U7R5GIaq.js";import"./index.esm-iiyI-toU.js";import"./Pagination-gVOcxBx4.js";import"./Select-aeRvqRmw.js";import"./slicedToArray-IZTdWzIB.js";import"./unsupportedIterableToArray-RbDDH4Bc.js";import"./toConsumableArray-TeBove6f.js";import"./context-_X_Ia2Rl.js";import"./TableRowSkeleton-HTHbCOTH.js";import"./Skeleton-yp1ZlUZw.js";import"./index-7lD32DxE.js";import"./chainedFunction-ltcSYACe.js";import"./StatusIcon-L39cXky5.js";import"./CloseButton-Lwp70ThL.js";import"./Dialog-4z8jxMEB.js";import"./index-PQBKoFWY.js";import"./index-mu0NPuvO.js";import"./isNil-jxFxtNPR.js";const k="salesProductList",g=M(k+"/getProducts",async t=>(await H(t)).data),ne=async t=>(await U(t)).data,R={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},le={loading:!1,deleteConfirmation:!1,selectedProduct:"",productList:[],tableData:R,filterData:{name:"",category:["bags","cloths","devices","shoes","watches"],status:[0,1,2],productStatus:0}},I=G({name:`${k}/state`,initialState:le,reducers:{updateProductList:(t,a)=>{t.productList=a.payload},setTableData:(t,a)=>{t.tableData=a.payload},setFilterData:(t,a)=>{t.filterData=a.payload},toggleDeleteConfirmation:(t,a)=>{t.deleteConfirmation=a.payload},setSelectedProduct:(t,a)=>{t.selectedProduct=a.payload}},extraReducers:t=>{t.addCase(g.fulfilled,(a,c)=>{a.productList=c.payload.data,a.tableData.total=c.payload.total,a.loading=!1}).addCase(g.pending,a=>{a.loading=!0})}}),{updateProductList:lt,setTableData:S,setFilterData:ce,toggleDeleteConfirmation:w,setSelectedProduct:ct}=I.actions,ie=I.reducer,de=V({data:ie}),x=q,me=()=>{const t=P(),a=x(n=>n.salesProductList.data.deleteConfirmation),c=x(n=>n.salesProductList.data.selectedProduct),d=x(n=>n.salesProductList.data.tableData),i=()=>{t(w(!1))},r=async()=>{t(w(!1)),await ne({id:c})&&(t(g(d)),$.push(e.jsx(J,{title:"Successfuly Deleted",type:"success",duration:2500,children:"Product successfuly deleted"}),{placement:"top-center"}))};return e.jsx(X,{isOpen:a,type:"danger",title:"Delete product",confirmButtonColor:"red-600",onClose:i,onRequestClose:i,onCancel:i,onConfirm:r,children:e.jsx("p",{children:"Are you sure you want to delete this product? All record related to this product will be deleted as well. This action cannot be undone."})})},ue=({row:t})=>{const a=t.img?e.jsx(N,{src:t.img}):e.jsx(N,{icon:e.jsx(W,{})});return e.jsxs("div",{className:"flex items-center",children:[a,e.jsx("span",{className:"ml-2 rtl:mr-2 font-semibold",children:t.name})]})},pe=()=>{const t=h.useRef(null),a=P(),{pageIndex:c,pageSize:d,sort:i,query:r,total:n}=x(l=>l.salesProductList.data.tableData),s=x(l=>l.salesProductList.data.filterData),o=x(l=>l.salesProductList.data.loading),f=x(l=>l.salesProductList.data.productList);h.useEffect(()=>{A()},[c,d,i]),h.useEffect(()=>{var l;t&&((l=t.current)==null||l.resetSorting())},[s]);const m=h.useMemo(()=>({pageIndex:c,pageSize:d,sort:i,query:r,total:n}),[c,d,i,r,n]),A=()=>{a(g({pageIndex:c,pageSize:d,sort:i,query:r,filterData:s}))},z=h.useMemo(()=>[{header:"Contact",accessorKey:"contact",cell:l=>{const u=l.row.original;return e.jsx(ue,{row:u})},enableSorting:!1},{header:"Email",accessorKey:"email",enableSorting:!1},{header:"Total Followers",accessorKey:"followers",sortable:!0},{header:"Gender",accessorKey:"gender",enableSorting:!1},{header:"Created",accessorKey:"created",sortable:!0},{header:"Last Updated",accessorKey:"last_updated",enableSorting:!1},{header:"Relationship Stage",accessorKey:"relationship",enableSorting:!1},{header:"Owner",accessorKey:"owner",enableSorting:!1},{header:"City",accessorKey:"city",enableSorting:!1}],[]),K=l=>{const u=C(m);u.pageIndex=l,a(S(u))},O=l=>{const u=C(m);u.pageSize=Number(l),u.pageIndex=1,a(S(u))},E=l=>{const u=C(m);u.sort=l,a(S(u))};return e.jsxs(e.Fragment,{children:[e.jsx(Q,{ref:t,columns:z,data:f,skeletonAvatarColumns:[0],skeletonAvatarProps:{className:"rounded-md"},loading:o,pagingData:{total:m.total,pageIndex:m.pageIndex,pageSize:m.pageSize},onPaginationChange:K,onSelectChange:O,onSort:E}),e.jsx(me,{})]})},he=()=>{const t=P(),a=h.useRef(null),c=x(s=>s.salesProductList.data.tableData),d=te(i,500);function i(s){const o=C(c);o.query=s,o.pageIndex=1,typeof s=="string"&&s.length>1&&r(o),typeof s=="string"&&s.length===0&&r(o)}const r=s=>{t(S(s)),t(g(s))},n=s=>{d(s.target.value)};return e.jsx(L,{ref:a,className:"max-w-md md:w-52 md:mb-0 mb-4",size:"sm",placeholder:"Search creator",prefix:e.jsx(F,{className:"text-lg"}),onChange:n})},T=h.forwardRef(({onSubmitComplete:t},a)=>{const c=P(),d=x(r=>r.salesProductList.data.filterData),i=r=>{t==null||t(),c(ce(r)),c(g(R))};return e.jsx(ae,{enableReinitialize:!0,innerRef:a,initialValues:d,onSubmit:r=>{i(r)},children:({values:r,touched:n,errors:s})=>e.jsx(se,{children:e.jsxs(re,{children:[e.jsxs(j,{invalid:s.name&&n.name,errorMessage:s.name,children:[e.jsx("h6",{className:"mb-4",children:"Included text"}),e.jsx(y,{type:"text",autoComplete:"off",name:"name",placeholder:"Keyword",component:L,prefix:e.jsx(F,{className:"text-lg"})})]}),e.jsxs(j,{invalid:s.category&&n.category,errorMessage:s.category,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(y,{name:"category",children:({field:o,form:f})=>e.jsx(e.Fragment,{children:e.jsxs(p.Group,{vertical:!0,value:r.category,onChange:m=>f.setFieldValue(o.name,m),children:[e.jsxs(p,{className:"mb-3",name:o.name,value:"bags",children:["Bags"," "]}),e.jsxs(p,{className:"mb-3",name:o.name,value:"cloths",children:["Cloths"," "]}),e.jsxs(p,{className:"mb-3",name:o.name,value:"devices",children:["Devices"," "]}),e.jsxs(p,{className:"mb-3",name:o.name,value:"shoes",children:["Shoes"," "]}),e.jsxs(p,{name:o.name,value:"watches",children:["Watches"," "]})]})})})]}),e.jsxs(j,{invalid:s.status&&n.status,errorMessage:s.status,children:[e.jsx("h6",{className:"mb-4",children:"Product Category"}),e.jsx(y,{name:"status",children:({field:o,form:f})=>e.jsx(e.Fragment,{children:e.jsxs(p.Group,{vertical:!0,value:r.status,onChange:m=>f.setFieldValue(o.name,m),children:[e.jsxs(p,{className:"mb-3",name:o.name,value:0,children:["In Stock"," "]}),e.jsxs(p,{className:"mb-3",name:o.name,value:1,children:["Limited"," "]}),e.jsxs(p,{className:"mb-3",name:o.name,value:2,children:["Out Of Stock"," "]})]})})})]}),e.jsxs(j,{invalid:s.productStatus&&n.productStatus,errorMessage:s.productStatus,children:[e.jsx("h6",{className:"mb-4",children:"Product Status"}),e.jsx(y,{name:"productStatus",children:({field:o,form:f})=>e.jsxs(D.Group,{vertical:!0,value:r.productStatus,onChange:m=>f.setFieldValue(o.name,m),children:[e.jsx(D,{value:0,children:"Published"}),e.jsx(D,{value:1,children:"Disabled"}),e.jsx(D,{value:2,children:"Archive"})]})})]})]})})})}),xe=({onSaveClick:t,onCancel:a})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(b,{size:"sm",className:"mr-2",onClick:a,children:"Cancel"}),e.jsx(b,{size:"sm",variant:"solid",onClick:t,children:"Query"})]}),fe=()=>{const t=h.useRef(null),[a,c]=h.useState(!1),d=()=>{c(!0)},i=()=>{c(!1)},r=()=>{var n;(n=t.current)==null||n.submitForm()};return e.jsxs(e.Fragment,{children:[e.jsx(b,{size:"sm",className:"block md:inline-block ltr:md:ml-2 rtl:md:mr-2 md:mb-0 mb-4",icon:e.jsx(Y,{}),onClick:()=>d(),children:"Filter"}),e.jsx(oe,{title:"Filter",isOpen:a,footer:e.jsx(xe,{onCancel:i,onSaveClick:r}),onClose:i,onRequestClose:i,children:e.jsx(T,{ref:t,onSubmitComplete:i})})]})};T.displayName="FilterForm";const ge=()=>e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center",children:[e.jsx(he,{}),e.jsx(fe,{}),e.jsx(v,{download:!0,className:"block lg:inline-block md:mx-2 md:mb-0 mb-4",to:"/data/product-list.csv",target:"_blank",children:e.jsx(b,{block:!0,variant:"default",size:"sm",icon:e.jsx(Z,{}),children:"Views"})}),e.jsx(v,{className:"block lg:inline-block md:mb-0 mb-4",to:"/app/sales/product-new",children:e.jsx(b,{block:!0,variant:"solid",size:"sm",icon:e.jsx(ee,{}),children:"Add Creator"})})]});B("salesProductList",de);const be=()=>e.jsxs(_,{className:"h-full",bodyClass:"h-full",children:[e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"mb-4 lg:mb-0",children:"Creators"}),e.jsx(ge,{})]}),e.jsx(pe,{})]}),it=be;export{it as default};
